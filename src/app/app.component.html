<div *ngIf="isLoggedIn$ | async; else loginPageLayout">
  

  <nav class="navbar">
    <div class="navbar-brand">
      <a routerLink="/" class="navbar-item brand-text">Cost Management</a>
    </div>

    <div class="navbar-menu">
      <div class="navbar-start">
        <a 
          routerLink="/todos" 
          routerLinkActive="is-active" 
          class="navbar-item">
      
        </a>
      </div>

      <div class="navbar-end">
    
        <div class="profile-container">
          <button
            (click)="toggleDropdown()"
            class="profile-btn"
            title="Profile">
            <i class="material-icons">person</i>
          </button>

          <div class="profile-dropdown" *ngIf="showDropdown">
            <div class="dropdown-username">
              {{ (user$ | async)?.UserName || 'User' }}
              {{ (user$ | async)?.UserCode || 'user' }}
            </div>
            <button class="dropdown-logout" (click)="logout()">Logout</button>
          </div>
        </div>
      </div>
    </div>
  </nav>


  <div class="sidenav-container">
    <aside class="custom-sidenav">
      <div class="sidenav-header"></div>
      <ul class="nav-list">

        <li class="nav-item" routerLink="/dashboard/dashh" routerLinkActive="active-link">
          <div class="nav-item-content">
            <span class="material-icons nav-icon">dashboard</span>
            <span class="nav-text">Dashboard</span>
          </div>
        </li>


        <li class="nav-item has-submenu">
          <div class="nav-item-content">
            <span class="material-icons nav-icon">group</span>
            <span class="nav-text">User Management</span>
          </div>
          <ul class="submenu">
            <li routerLink="/master">
              <span class="material-icons submenu-icon">person</span> User
            </li>
            <li routerLink="/system/roles">
              <span class="material-icons submenu-icon">security</span> Role
            </li>
            <li routerLink="/system/shifts">
              <span class="material-icons submenu-icon">people</span> Shift
            </li>
            <li routerLink="/entity/machine-type">
              <span class="material-icons submenu-icon">business</span> machine-type
            </li>
            <li routerLink="/entity/machine-registry">
              <span class="material-icons submenu-icon">apartment</span> machine
            </li>
          </ul>
        </li>


        <li class="nav-item has-submenu">
          <div class="nav-item-content">
            <span class="material-icons nav-icon">inventory_2</span>
            <span class="nav-text">Material Management</span>
          </div>
          <ul class="submenu">
            <li routerLink="/material/material/type">
              <span class="material-icons submenu-icon">list_alt</span> Material Type
            </li>
            <li routerLink="/material/list">
              <span class="material-icons submenu-icon">category</span> Material
            </li>
            <li routerLink="/grade">
              <span class="material-icons submenu-icon">grade</span> Grade
            </li>
          </ul>
        </li>

 
        <li class="nav-item has-submenu">
          <div class="nav-item-content">
            <span class="material-icons nav-icon">engineering</span>
            <span class="nav-text">Process Management</span>
          </div>
          <ul class="submenu">
            <li routerLink="/material/process">
              <span class="material-icons submenu-icon">settings</span> Process
            </li>
            <li routerLink="/material/power-cost">
              <span class="material-icons submenu-icon">bolt</span> Power Cost
            </li>
            <li routerLink="/material/salary-wages">
              <span class="material-icons submenu-icon">attach_money</span> Salary & Wages
            </li>
            <li routerLink="/material/over-heads">
              <span class="material-icons submenu-icon">calculate</span> Over-heads
            </li>
            <li routerLink="/master/meterialinput/casting">
              <span class="material-icons submenu-icon">input</span> Casting Input
             
            </li>
          </ul>
        </li>


        <li class="nav-item" routerLink="/material/customer-details" routerLinkActive="active-link">
          <div class="nav-item-content">
            <span class="material-icons nav-icon">person</span>
            <span class="nav-text">Quotation Generator</span>
          </div>
        </li>


        <li class="nav-item" routerLink="/dashboard/report" routerLinkActive="active-link">
          <div class="nav-item-content">
            <span class="material-icons nav-icon">bar_chart</span>
            <span class="nav-text">Reports</span>
          
          </div>
        </li>
      </ul>
    </aside>


    <main class="container">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>

<ng-template #loginPageLayout>
  <main class="container">
    <router-outlet></router-outlet>
  </main>
</ng-template>
